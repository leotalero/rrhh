<%@ include file="/taglibs.jsp"%>
<script type="text/javascript">

	$(document).ready(function() {
			
		$("#dmDetalleEmpleado").dialog({   				
			width: 1100,
			height: 650,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});

		$("#dmDetalleProcesoDisciplinario").dialog({   				
			width: 900,
			height: 600,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});

		$("#dmEditarfoto").dialog({				
			width:550,
			height: 550,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		$("#dmMensajeEmpleado").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		

		$("#dmMensajeBanco").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmMensajeDisciplinario").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmMensajeSalario").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		
		$("#dmMensajeDocumentoPersonal").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmMensajeAfiliacion").dialog({   				
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmMensajeProcesoDisciplinario").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmMensajeEducacion").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmMensajeFamilia").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmNuevoEmpleado").dialog({   				
			width: 800,
			height: 400,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});

		$("#dmNuevaPropiedad").dialog({   				
			width:600,
			height: 300,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		$("#dmEditarPropiedad").dialog({   				
			width:600,
			height: 300,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmEditarBanco").dialog({   				
			width:600,
			height: 300,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmEditarAfiliacion").dialog({   				
			width:600,
			height: 350,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmEditarDisciplina").dialog({   				
			width:600,
			height: 350,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmEditarEducacion").dialog({   				
			width:600,
			height: 400,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmEditarFamilia").dialog({   				
			width:600,
			height: 400,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
// 		$("#dmEditarEducacion").dialog({   				
// 			width:600,
// 			height: 350,   				
// 			modal: true,
// 			autoOpen: false,
// 			resizable: true
// 		});
		
		$("#dmEditarHorarioAsignado").dialog({   				
			width:800,
			height: 300,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});

		$("#dmEditarEmpleado").dialog({   				
			width: 1000,
			height: 700,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});

		$( "#dmEditarEmpleadoContrasena" ).dialog({   				
			width: 450,
			height: 250,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});

		$( "#dmEditarEmpleadoAplicacion" ).dialog({   				
			width: 500,
			height: 250,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});		
		
		$( "#dmEditarEmpleadoCuenta" ).dialog({   				
			width: 500,
			height: 250,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmNuevoContrato").dialog({   				
			width: 800,
			height: 500,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		
		//Crear Banco
		$("#dmNuevoBanco").dialog({   				
			width: 800,
			height: 400,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		//Crear Afilación
		$("#dmNuevaAfiliacion").dialog({   				
			width: 800,
			height: 400,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		//Crear Proceso Disciplinario
		$("#dmNuevoProcesoDisciplinario").dialog({   				
			width: 800,
			height: 700,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		//Crear Familia
		$("#dmNuevoFamiliar").dialog({   				
			width: 800,
			height: 400,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		//Crear Educación
		$("#dmNuevaEducacion").dialog({   				
			width: 800,
			height: 400,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmEditarHorario").dialog({   				
			width: 1000,
			height: 500,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		//Proceso Disciplinario
		$("#dmProcesoDisciplinario").dialog({   				
			width: 1100,
			height: 500,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		//Proceso Disciplinario
		$("#dmAdicionTestigo").dialog({   				
			width: 1100,
			height: 500,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		
		$("#dmEditarSalario").dialog({   				
			width: 550,
			height: 320,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmEditarContrato").dialog({   				
			width: 800,
			height: 500,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmMensajeContrato").dialog({   				
			width: 400,
			height: 200,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#dmDesvinculacion").dialog({   				
			width:900,
			height: 800,   				
			modal: true,
			autoOpen: false,
			resizable: true
		});
		
		$("#btnNuevoEmpleado").button();
		$("#btnBuscarUsuario").button();
		$("#btnBuscarUsuario").focus();

		$("#btnNuevoEmpleado").click(function(){
			$("#dmNuevoEmpleado").dialog("open");
			$("#dmNuevoEmpleado").html(getHTMLLoaging30());
			
			$.ajax({
					cache: false,
					contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
		            type: 'POST',	            
		            url: "${ctx}/page/empleado?action=empleado_nuevo",
		            dataType: "text",
		            error: function(jqXHR, textStatus, errorThrown) {
		                alert(jqXHR.statusText);
			        },
		            success: function(data) {		                    	                    	
		               	$("#dmNuevoEmpleado").html(data);     
		            }
		        });
		});

		$("#fBuscarUsuario").validate({
			errorLabelContainer: "#msnBuscarEmpleado",
			errorClass: "invalid",
			rules: {
				tipobusqueda:{
					required: true
				},				
				from:{
					required: function(element){ 
						return $("#tipobusquedausuario").val() == 1;
						} 
				},
				to:{
					required: function(element){ return $("#tipobusquedausuario").val() == 1;} 
				},
				nombre:{
					required: function(element){ return $("#tipobusquedausuario").val() == 2;} 
				},
				numidentificacion:{
					required: function(element){ return $("#tipobusquedausuario").val() == 3;}, 
					digits: function(element){ return $("#tipobusquedausuario").val() == 3;}
				},
				usuario:{
					required: function(element){ return $("#tipobusquedausuario").val() == 4;} 
				},
				codusuario:{
					required: function(element){ return $("#tipobusquedausuario").val() == 5;} 
				},
				idaplicacion:{
					required: function(element){ return $("#tipobusquedausuario").val() == 6;} 
				},
				idgrupo:{
					required: function(element){ return $("#tipobusquedausuario").val() == 7;} 
				},
				idcuenta:{
					required: function(element){ return $("#tipobusquedausuario").val() == 8;} 
				}
			},
			messages: {
				tipobusqueda: {
					required: "Selecione un tipo de búsqueda."
				},				
				from: {
					required: "Seleccione una fecha válida."
				},
				to: {
					required: "Seleccione una fecha válida."
				},
				nombre:{
					required: "Ingrese un valor." 
				},
				numidentificacion:{
					required: "Ingrese un valor.",
					digits: "Ingrese solo dígitos"
				},
				usuario:{
					required: "Ingrese un valor." 
				},
				codusuario:{
					required: "Ingrese un valor."
				},
				idaplicacion:{
					required: "Ingrese un valor." 
				},
				idgrupo:{
					required: "Ingrese un valor." 
				},
				idcuenta:{
					required: "Ingrese un valor." 
				}
				
			},
			submitHandler: function(form) {				
				actualizarBusquedaDeUsuario(form);
			}
		});

		var dates = $("#from_b_usuario, #to_b_usuario").datepicker({
			dateFormat : "dd/mm/yy",
			maxDate : '0',
			numberOfMonths: 1,
			dayNamesMin : [ 'Do', 'Lu', 'Ma', 'Mi',
					'Ju', 'Vi', 'Sa' ],
			monthNames : [ 'Enero', 'Febrero', 'Marzo',
					'Abril', 'Mayo', 'Junio', 'Julio',
					'Agosto', 'Septiembre', 'Octubre',
					'Noviembre', 'Diciembre' ],
			monthNamesShort : [ 'Ene', 'Feb', 'Mar',
					'Abr', 'May', 'Jun', 'Jul', 'Ago',
					'Sep', 'Oct', 'Nov', 'Dic' ],
			onSelect: function( selectedDate ) {
						var option = this.id == "from_b_usuario" ? "minDate" : "maxDate",
							instance = $( this ).data( "datepicker" ),
							date = $.datepicker.parseDate(
								instance.settings.dateFormat ||
								$.datepicker._defaults.dateFormat,
								selectedDate, instance.settings );
						dates.not( this ).datepicker( "option", option, date );
			}
		});	

		$("#tipobusquedausuario").change( function() {
			var data =  $(this).val();
			
// 			$(".classtipobusquedausuario").hide();
			
			$("#tipobusquedausuario_creacion").hide();
			$("#tipobusquedausuario_nombreempleado").hide();
			$("#tipobusquedausuario_numidentificacion").hide();
			
			if(data==1){
				$("#tipobusquedausuario_creacion").show();
			}else if(data==2){
				$("#tipobusquedausuario_nombreempleado").show();
			}else if(data==3){
				$("#tipobusquedausuario_numidentificacion").show();
			}else if(data==4){
				$("#tipobusquedausuario_usuario").show();
			}else if(data==5){
				$("#tipobusquedausuario_codusuario").show();
			}else if(data==6){
				$("#tipobusquedausuario_idaplicacion").show();
			}else if(data==7){
				$("#tipobusquedausuario_idgrupo").show();
			}else if(data==8){
				$("#tipobusquedausuario_idcuenta").show();
			}
			
			 
		});		
		
	});

	function visualizarDetalleEmpleado(idempleado){
		$("#dmDetalleEmpleado").dialog("open");  
		actualizarDetalleEmpleado(idempleado);
	}
	
	
	
	
	function actualizarDetalleEmpleado(idempleado){
		$("#dmDetalleEmpleado").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/empleado?action=empleado_detalle&idempleado="+idempleado,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {		                    	                    	
               	$("#dmDetalleEmpleado").html(data);     
            }
        });
	}
	
	/*
	 * Mostrar el detalle del proceso disciplinario.
	 */
	function visualizarDetalleProcesoDisciplinario(idDisciplina,idSancion,idContrato,idFalta){
		$("#dmDetalleProcesoDisciplinario").dialog("open");  
		mostrarDetalleProcesoDisciplinario(idDisciplina,idSancion,idContrato,idFalta);
	}
	
	/*
	 * Mostrar el detalle del proceso disciplinario desde el historico disciplinario.
	 */
	function visualizarDetalleProcesoDisciplinarioDesdeHistorial(idDisciplina,idSancion,idContrato,idFalta,listaIdAreas){
		$("#dmDetalleProcesoDisciplinario").dialog("open");  
		mostrarDetalleProcesoDisciplinarioDesdeHistorial(idDisciplina,idSancion,idContrato,idFalta,listaIdAreas);
	}
	
	/*
	 * Llamada al Servlet para obtener detalles del proceso.
	 * Mostrar el detalle del proceso disciplinario.
	 */
	function mostrarDetalleProcesoDisciplinario(idDisciplina,idSancion,idContrato,idFalta){
		
		$("#dmDetalleProcesoDisciplinario").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/disciplinario?action=detalleProcesoDisciplinario&idDisciplina="+idDisciplina+"&idSancion="+idSancion+"&idContrato="+idContrato+"&idFalta="+idFalta,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {		                    	                    	
               	$("#dmDetalleProcesoDisciplinario").html(data);     
            }
        });
	}

	/*
	 * Llamada al Servlet para obtener detalles del proceso disciplinario seleccionado.
	 * Mostrar el detalle del proceso disciplinario.
	 */
	function mostrarDetalleProcesoDisciplinarioDesdeHistorial(idDisciplina,idSancion,idContrato,idFalta,listaIdAreas){
		
		$("#dmDetalleProcesoDisciplinario").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/disciplinario?action=detalleProcesoDisciplinarioDesdeHistorial&idDisciplina="+idDisciplina+"&idSancion="+idSancion+"&idContrato="+idContrato+"&idFalta="+idFalta+"&listaIdAreas="+listaIdAreas,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {		                    	                    	
               	$("#dmDetalleProcesoDisciplinario").html(data);     
            }
        });
	}
	
	function visualizarEdicionEmpleado(idempleado){
	//alert("edita empleado");
		$("#dmEditarEmpleado").dialog("open");  
		actualizarEdicionEmpleado(idempleado);
	}
	
	function actualizarEdicionEmpleado(idempleado){
		$("#dmEditarEmpleado").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/empleado?action=empleado_edicion&idempleado="+idempleado,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {	                    	                    	
               	$("#dmEditarEmpleado").html(data);     
            }
        });
	}

	function visualizarEdicionEmpleadoAplicacion(idusuario, idaplicacion, idgrupo){
	//	alert("aplicacion");
		$("#dmEditarEmpleadoAplicacion").dialog("open");  
		actualizarEdicionEmpleadoAplicacion(idusuario, idaplicacion, idgrupo);
	}
	
	function actualizarEdicionEmpleadoAplicacion(idusuario, idaplicacion, idgrupo){
		$("#dmEditarEmpleadoAplicacion").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/usuario?action=usuario_aplicacion_edicion&idusuario="+idusuario+"&idaplicacion="+idaplicacion+"&idgrupo="+idgrupo,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {	                    	                    	
               	$("#dmEditarEmpleadoAplicacion").html(data);     
            }
        });
	}
	
	function visualizarEdicionEmpleadoCuenta(idusuario, idcuenta){
		$("#dmEditarEmpleadoCuenta").dialog("open");  
		actualizarEdicionEmpleadoCuenta(idusuario, idcuenta);
	}
	
	
	function actualizarEdicionEmpleadoCuenta(idusuario, idcuenta){
		$("#dmEditarEmpleadoCuenta").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/usuario?action=usuario_cuenta_edicion&idusuario="+idusuario+"&idcuenta="+idcuenta,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {	                    	                    	
               	$("#dmEditarEmpleadoCuenta").html(data);     
            }
        });
	}
	

	function visualizarEdicionEmpleadoContrasena(idusuario){
		$("#dmEditarEmpleadoContrasena").dialog("open");  
		actualizarEdicionEmpleadoContrasena(idusuario);
	}
	
	function actualizarEdicionEmpleadoContrasena(idusuario){
		$("#dmEditarEmpleadoContrasena").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/usuario?action=usuario_contrasena_edicion&idusuario="+idusuario,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {	                    	                    	
               	$("#dmEditarEmpleadoContrasena").html(data);     
            }
        });
	}

	function actualizarBusquedaDeUsuario(form){
		$("#cajaBuscarUsuario").html(getHTMLLoaging30()); 
       	$("#btnBuscarUsuario").attr('disabled',true);;	 				
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: $(form).attr('action'),
            data: $(form).serialize(),
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {
                $("#cajaBuscarUsuario").html(data);
                $("#btnBuscarUsuario").attr('disabled',false);	 
            }
        });
	}

	function validarEntero(valor){ 
    	valor = parseInt(valor);
     	if (isNaN(valor)) { 
           	 return false;
     	}else{
           	 return true;
     	} 
	}
	
	function visualizarCrearContrato(idempleado){
		$("#dmNuevoContrato").dialog("open");  
		AbreCrearContrato(idempleado);
	}
	
// 	Creación de banco nuevo al empleado
	function visualizarCrearBanco(idempleado){
		$("#dmNuevoBanco").dialog("open"); 
		abreCrearBanco(idempleado);
	}
	
	
	//Crear nueva afiliación
	function visualizarCrearAfiliacion(idempleado){
		$("#dmNuevaAfiliacion").dialog("open");
		abreCrearAfiliacion(idempleado);
	}
	
	//Para visualizar la ventana de crear un nuevo proceso disciplinario.
	function visualizarCrearProcesoDisciplinario(idcontrato){
		$("#dmNuevoProcesoDisciplinario").dialog("open");
		abreCrearProcesoDisciplinario(idcontrato);
	}
	
	//Crear un Familiar.
	function visualizarCrearFamiliar(idempleado){
		$("#dmNuevoFamiliar").dialog("open");
		abreCrearFamiliar(idempleado);
	}
	
	//Crear nuevo nivel academico
	function visualizarCrearEducacion(idempleado){
		$("#dmNuevaEducacion").dialog("open");
		abreCrearEducacion(idempleado);
	}
	
	
	function AbreCrearContrato(idempleado) {		

		$("#dmNuevoContrato").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/contrato?action=crear_contrato&idempleado="+idempleado,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {	                    	                    	
               	$("#dmNuevoContrato").html(data);     
            }
        });
	}
	
	
	//Para cargar la ventana de crear un nuevo banco.
	function abreCrearBanco(idempleado){
		
		$("#dmNuevoBanco").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/banco?action=crear_banco&idempleado="+idempleado,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {
               	$("#dmNuevoBanco").html(data);     
            }
        });
		
	}
	
	//Para cargar la ventana de crear una nueva afiliacion
	function abreCrearAfiliacion(idempleado){
		
		$("#dmNuevaAfiliacion").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/afiliacion?action=crear_afiliacion&idempleado="+idempleado,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {
               	$("#dmNuevaAfiliacion").html(data);     
            }
        });
		
	}
	
	
	/* Para cargar la ventana de crear un nuevo proceso disciplinario.
	 * action = crearProcesoDisciplinario
	 * param  = idcontrato
	 */
	function abreCrearProcesoDisciplinario(idcontrato){
		
		$("#dmNuevoProcesoDisciplinario").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/disciplinario?action=crearProcesoDisciplinario&idcontrato="+idcontrato,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {
               	$("#dmNuevoProcesoDisciplinario").html(data);     
            }
        });
		
	}
	
	
	//Para cargar la ventana de crear una nueva educación
	function abreCrearEducacion(idempleado){
		$("#dmNuevaEducacion").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/educacion?action=crear_educacion&idempleado="+idempleado,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {
               	$("#dmNuevaEducacion").html(data);     
            }
        });
		
	}
	
	//Para cargar la ventana de crear un nuevo familiar.
	function abreCrearFamiliar(idempleado){
		
		$("#dmNuevoFamiliar").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
            type: 'POST',
            url: "${ctx}/page/familia?action=crear_familiar&idempleado="+idempleado,
            dataType: "text",
            error: function(jqXHR, textStatus, errorThrown) {
                alert(jqXHR.statusText);
	        },
            success: function(data) {
               	$("#dmNuevoFamiliar").html(data);     
            }
        });
		
	}
	
	
function deshabilitarContrato(idcontrato) {		
	

	if(idcontrato==''){
		
	}else{
		
		if(confirm('¿Esta seguro de deshabilitar el contrato ?')){
			$("[name=btnDeshabilitarContrato]").attr('disabled',true);;
			$("#dmMensajeContrato").dialog("open");
			$("#dmMensajeEmpleado").html(getHTMLLoaging16(' Eliminando'));
			$.ajax({
				cache: false,
				contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	            type: 'post',            
	            url: '${ctx}/page/contrato?action=contrato_deshabilitar&idcontrato='+idcontrato,
	            data: '',
	            dataType: "text",
	            error: function(jqXHR, textStatus, errorThrown) {
	            	$("[name=btnDeshabilitarContrato]").attr('disabled',false);        		
	                $("#dmMensajeContrato").html(jqXHR.statusText);
		        },
	            success: function(data) {
	            	if(validarEntero(data)){
	            		$("#dmMensajeContrato").dialog("close");
	                	$("#dmDetalleEmpleado").dialog("close");
	                	visualizarDetalleEmpleado(data);
	                } else {
	                	$("[name=btnDeshabilitarContrato]").attr('disabled',false);
	                    $("#dmMensajeContrato").html('Error desconocido');					
	                }
	            }
	        });	 
		}
	}
}	


function habilitarContrato(idcontrato) {		
	
	//alert("deshabilitatr");
		if(idcontrato==''){
			
		}else{
			if(confirm('¿Esta seguro de habilitar el contrato ?')){
				$("[name=btnDeshabilitarContrato]").attr('disabled',true);;
				$("#dmMensajeContrato").dialog("open");
				$("#dmMensajeEmpleado").html(getHTMLLoaging16(' Eliminando'));
				$.ajax({
					cache: false,
					contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
		            type: 'post',            
		            url: '${ctx}/page/contrato?action=contrato_habilitar&idcontrato='+idcontrato,
		            data: '',
		            dataType: "text",
		            error: function(jqXHR, textStatus, errorThrown) {
		            	$("[name=btnDeshabilitarContrato]").attr('disabled',false);        		
		                $("#dmMensajeEmpleado").html(jqXHR.statusText);
			        },
		            success: function(data) {
		            	if(validarEntero(data)){
		            		$("#dmMensajeContrato").dialog("close");
		                	$("#dmDetalleEmpleado").dialog("close");
		                	visualizarDetalleEmpleado(data);
		                } else {
		                	$("[name=btnDeshabilitarContrato]").attr('disabled',false);
		                    $("#dmMensajeContrato").html('Error desconocido');					
		                }
		            }
		        });	 
			}
		}
	}	


function visualizarEditarContrato(idcontrato){
	//alert("editar conttrato");
	$("#dmEditarContrato").dialog("open");  
	AbreEditarContrato(idcontrato);
}



function AbreEditarContrato(idcontrato) {		

	$("#dmEditarContrato").html(getHTMLLoaging30());
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/contrato?action=ver_editar_contrato&idcontrato="+idcontrato,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {	                    	                    	
           	$("#dmEditarContrato").html(data);     
        }
    });
}

function visualizarEditarHorario(idcontrato){
	//alert("editar conttrato");
	//alert(".");
	$("#dmEditarHorario").dialog("close");
	//$("#dmEditarHorario").dialog("open");  
	AbreEditarHorario(idcontrato);
}

//Funcion para abrir la ventana de proceso disciplinario.
function visualizarProcesoDisciplinario(idcontrato){
	$("#dmProcesoDisciplinario").dialog("close");
	AbreProcesoDisciplinario(idcontrato);
}

//Funcion para abrir la ventana de buscar testigos
function visualizarBusquedaTestigo(idDisciplina,idSancion,idContrato,idFalta){
	$("#dmAdicionTestigo").dialog("close");
	abreAdicionTestigo(idDisciplina,idSancion,idContrato,idFalta);
// 	alert('En empleado busqueda. idDisciplina : '+idDisciplina);
}

function visualizarEditarSalario(idcontrato,idempleado){
	$("#dmEditarSalario").dialog("open");  
	AbreEditarSalario(idcontrato,idempleado);
}

//funcion para mostrar los procesos disciplinarios.
function AbreProcesoDisciplinario(idcontrato){
	$("#dmProcesoDisciplinario").dialog("open");
	$("#dmProcesoDisciplinario").html(getHTMLLoaging30());
	
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/disciplinario?action=verProcesoDisciplinario&idcontrato="+idcontrato,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {	                    	                    	
           	$("#dmProcesoDisciplinario").html(data);     
        }
    });
}

//funcion para mostrar la busqueda de testigos.
function abreAdicionTestigo(idDisciplina,idSancion,idContrato,idFalta){
 	//alert('En empleado busqueda. idDisciplina : '+idDisciplina);
	$("#dmAdicionTestigo").dialog("open");
	$("#dmAdicionTestigo").html(getHTMLLoaging30());
	
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/disciplinario?action=verAdicionTestigo&idDisciplina="+idDisciplina+'&idSancion='+idSancion+'&idContrato='+idContrato+'&idFalta='+idFalta,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {	                    	                    	
           	$("#dmAdicionTestigo").html(data);     
        }
    });
}

function AbreEditarHorario(idcontrato) {		
	$("#dmEditarHorario").dialog("open");
	$("#dmEditarHorario").html(getHTMLLoaging30());
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/contrato?action=ver_editar_horario&idcontrato="+idcontrato,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {	                    	                    	
           	$("#dmEditarHorario").html(data);     
        }
    });
}


function AbreEditarSalario(idcontrato,idempleado) {		

	$("#dmEditarSalario").html(getHTMLLoaging30());
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/contrato?action=ver_editar_salario&idcontrato="+idcontrato+"&idempleado="+idempleado,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {	                    	                    	
           	$("#dmEditarSalario").html(data);     
        }
    });
}




function deshabilitarHorarioAsignado(idhorarioasignado) {		
	
	
	if(idhorarioasignado==''){
		
	}else{
		if(confirm('¿Esta seguro de deshabilitar el horario a este contrato ?')){
			
			$("#dmMensajeContrato").dialog("open");
			$("#dmMensajeContrato").html(getHTMLLoaging16(' Eliminando'));
			$.ajax({
				cache: false,
				contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	            type: 'post',            
	            url: '${ctx}/page/horarios?action=deshabilitar_horarioasignado&idhorarioasignado='+idhorarioasignado,
	            data: '',
	            dataType: "text",
	            error: function(jqXHR, textStatus, errorThrown) {
	            	//$("[name=btnDeshabilitarEmpleado]").attr('disabled',false);        		
	                $("#dmMensajeContrato").html(jqXHR.statusText);
		        },
	            success: function(data) {
	            	if(validarEntero(data)){
	            		$("#dmMensajeContrato").dialog("close");
	                	$("#dmEditarHorario").dialog("close");
	                	visualizarEditarHorario(data);
	                } else {
	                	//$("[name=btnDeshabilitarEmpleado]").attr('disabled',false);
	                    $("#dmMensajeContrato").html('Error desconocido');					
	                }
	            }
	        });	 
		}
	}
}	
function habilitarHorarioAsignado(idhorarioasignado) {		
	
	
	if(idhorarioasignado==''){
		
	}else{
		if(confirm('¿Esta seguro de habilitar el horario a este contrato ?')){
			
			$("#dmMensajeContrato").dialog("open");
			$("#dmMensajeContrato").html(getHTMLLoaging16(' Eliminando'));
			$.ajax({
				cache: false,
				contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	            type: 'post',            
	            url: '${ctx}/page/horarios?action=habilitar_horarioasignado&idhorarioasignado='+idhorarioasignado,
	            data: '',
	            dataType: "text",
	            error: function(jqXHR, textStatus, errorThrown) {
	            	//$("[name=btnDeshabilitarEmpleado]").attr('disabled',false);        		
	                $("#dmMensajeContrato").html(jqXHR.statusText);
		        },
	            success: function(data) {
	            	if(validarEntero(data)){
	            		$("#dmMensajeContrato").dialog("close");
	                	$("#dmEditarHorario").dialog("close");
	                	visualizarEditarHorario(data);
	                } else {
	                	//$("[name=btnDeshabilitarEmpleado]").attr('disabled',false);
	                    $("#dmMensajeContrato").html('Error desconocido');					
	                }
	            }
	        });	 
		}
	}
}	

function sucursal(idempresa,idcontrato){
	//$("#cajaBuscarBase").html('');
	//$("#productotipo").val(idproductotipo);
	//alert("contrato:"+idcontrato +"idempresa"+idempresa);

	$("#divSucursal").html(getHTMLLoaging30());
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        dataType : 'text',
        url: "${ctx}/page/contrato?action=cargar_sucursales&idempresa="+idempresa+"&idcontrato="+idcontrato,
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {
           	$("#divSucursal").html(data);     
        }
    });
}

/**
 * Método para cargar la lista de entidades por tipo de afiliación.
 */
function entidad(idafiliaciontipo){
	if(idafiliaciontipo){
		$("#divEntidad").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/afiliacion?action=cargar_entidades&idafiliaciontipo="+idafiliaciontipo,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divEntidad").html(data);     
	        }
	    });
	}else{
		alert('Seleccione un tipo de afiliación.');
	}
	
}

/**
 * Método para cargar la lista de faltas por tipo de falta y contrato.
 */
function falta(idFaltaTipo,idContrato){
	if(idFaltaTipo && idContrato){
		$("#divFalta").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/disciplinario?action=cargarFaltasPorTipoDeFalta&idFaltaTipo="+idFaltaTipo+"&idContrato="+idContrato,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divFalta").html(data);     
	        }
	    });
	}else{
		alert('Seleccione un tipo de falta.');
	}
	
}



/**
 * Método para cargar los datos de la sancion segun seleccionen la falta.
 */
function cargarDatosDeSancion(idFalta,idContrato){
	if(idFalta && idContrato){
		//cargar Datos De Recurrencia
		$("#divDatosDeRecurrencia").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/disciplinario?action=cargarDatosDeRecurrencia&idFalta="+idFalta+"&idContrato="+idContrato,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divDatosDeRecurrencia").html(data);     
	        }
	    });
		
		//cargar Datos De Sanción
		$("#divDatosDeSancion").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/disciplinario?action=cargarDatosDeSancion&idFalta="+idFalta+"&idContrato="+idContrato,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divDatosDeSancion").html(data);     
	        }
	    });
		
		//cargar Datos De Procedimiento
		$("#divDatosDeProcedimiento").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/disciplinario?action=cargarDatosDeProcedimiento&idFalta="+idFalta+"&idContrato="+idContrato,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divDatosDeProcedimiento").html(data);     
	        }
	    });
		
		//cargar datos de los testigos
		$("#divDatosDeTestigos").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/disciplinario?action=cargarDatosDeTestigos&idFalta="+idFalta,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divDatosDeTestigos").html(data);     
	        }
	    });

		
		//Cargar los formatos segun la falta seleccionada.
		$("#divFormatosDeFalta").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/disciplinario?action=cargarFormatosDeFalta&idFalta="+idFalta+"&idContrato="+idContrato,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divFormatosDeFalta").html(data);     
	        }
	    });
		
		
	}else{
		alert('Seleccione una falta.');
	}
	
}


/**
 * Método para cargar la recurrencia a aplicar para esa sanción.
 */
function cargarRecurrenciaDeSancion(idFalta){
	if(idFalta!=''){
		//cargar Datos De Recurrencia
		$("#divNumeroRecurrencia").html(getHTMLLoaging30());
		$.ajax({
			cache: false,
			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
	        type: 'POST',
	        dataType : 'text',
	        url: "${ctx}/page/administracion?action=cargarNumeroRecurrencia&idFalta="+idFalta,
	        error: function(jqXHR, textStatus, errorThrown) {
	            alert(jqXHR.statusText);
	        },
	        success: function(data) {
	           	$("#divNumeroRecurrencia").html(data);     
	        }
	    });
		
}


//Esto se comenta porque el navegador no detecta la funcion.
// Esta funcion se pasó a contrato_nuevo.

// function cargos(idarea,idcontrato){
// 	$("#divCargo").html(getHTMLLoaging30());
// 	$.ajax({
// 		cache: false,
// 		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
//         type: 'POST',
//         dataType : 'text',
//         url: "${ctx}/page/contrato?action=cargar_cargos&idarea="+idarea+"&idcontrato="+idcontrato,
//         error: function(jqXHR, textStatus, errorThrown) {
//             alert(jqXHR.statusText);
//         },
//         success: function(data) {	
        	
//            	$("#divCargo").html(data);     
//         }
//     });
// }

function Vercrearpropiedadempleado(idempleado){
	//alert("");
	$("#dmNuevaPropiedad").dialog("open");
	$("#dmNuevaPropiedad").html(getHTMLLoaging30());
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/empleado?action=empleado_vernuevapropiedad&idempleado="+idempleado,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {		                    	                    	
           	$("#dmNuevaPropiedad").html(data);     
        }
    });
}


// function VereditarpropiedadEmpleado(idempleadopropiedad,idempleado){
// 	//alert("editar prop");
// 	$("#dmEditarPropiedad").dialog("open");
// 	$("#dmEditarPropiedad").html(getHTMLLoaging30());
// 	$.ajax({
// 		cache: false,
// 		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
//         type: 'POST',
//         url: "${ctx}/page/empleado?action=empleado_vereditarpropiedad&idempleado="+idempleado+"&idempleadopropiedad="+idempleadopropiedad,
//         dataType: "text",
//         error: function(jqXHR, textStatus, errorThrown) {
//             alert(jqXHR.statusText);
//         },
//         success: function(data) {		                    	                    	
//            	$("#dmEditarPropiedad").html(data);     
//         }
//     });
// }

/**
 * Ver editar empleado banco.
 */
//  function VerEditarEmpleadoBanco(idempleadobanco,idempleado){
// 		//alert('Entro a VerEditarEmpleadoBanco');
// 		$("#dmEditarBanco").dialog("open");
// 		$("#dmEditarBanco").html(getHTMLLoaging30());
// 		$.ajax({
// 			cache: false,
// 			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
// 	        type: 'POST',
// 	        url: "${ctx}/page/banco?action=empleado_vereditarbanco&idempleado="+idempleado+"&idempleadobanco="+idempleadobanco,
// 	        dataType: "text",
// 	        error: function(jqXHR, textStatus, errorThrown) {
// 	            alert(jqXHR.statusText);
// 	        },
// 	        success: function(data) {		                    	                    	
// 	           	$("#dmEditarBanco").html(data);     
// 	        }
// 	    });
// }



 /**
  * Ver editar empleado afiliación.
  */
//   function VerEditarEmpleadoAfiliacion(idempleadoafiliacion,idempleado){
//  		$("#dmEditarAfiliacion").dialog("open");
//  		$("#dmEditarAfiliacion").html(getHTMLLoaging30());
//  		$.ajax({
//  			cache: false,
//  			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
//  	        type: 'POST',
//  	        url: "${ctx}/page/afiliacion?action=empleado_vereditarafiliacion&idempleado="+idempleado+"&idempleadoafiliacion="+idempleadoafiliacion,
//  	        dataType: "text",
//  	        error: function(jqXHR, textStatus, errorThrown) {
//  	            alert(jqXHR.statusText);
//  	        },
//  	        success: function(data) {		                    	                    	
//  	           	$("#dmEditarAfiliacion").html(data);     
//  	        }
//  	    });
//  }
 
  /**
   * Ver editar Disciplina.
   */
  function VerEditarDisciplina(idDisciplina){
  		$("#dmEditarDisciplina").dialog("open");
  		$("#dmEditarDisciplina").html(getHTMLLoaging30());
  		$.ajax({
  			cache: false,
  			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
  	        type: 'POST',
  	        url: "${ctx}/page/disciplinario?action=verEditarProceso&idDisciplina="+idDisciplina,
  	        dataType: "text",
  	        error: function(jqXHR, textStatus, errorThrown) {
  	            alert(jqXHR.statusText);
  	        },
  	        success: function(data) {		                    	                    	
  	           	$("#dmEditarDisciplina").html(data);     
  	        }
  	    });
  }
  
  /**
   * Ver editar empleado educación.
   */
//    function VerEditarEmpleadoEducacion(idempleadoeducacion,idempleado){
//   		$("#dmEditarEducacion").dialog("open");
//   		$("#dmEditarEducacion").html(getHTMLLoaging30());
//   		$.ajax({
//   			cache: false,
//   			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
//   	        type: 'POST',
//   	        url: "${ctx}/page/educacion?action=empleado_vereditareducacion&idempleado="+idempleado+"&idempleadoeducacion="+idempleadoeducacion,
//   	        dataType: "text",
//   	        error: function(jqXHR, textStatus, errorThrown) {
//   	            alert(jqXHR.statusText);
//   	        },
//   	        success: function(data) {	
//   	           	$("#dmEditarEducacion").html(data);     
//   	        }
//   	    });
//   }
  
   /**
    * Ver editar empleado familia.
    */
//     function VerEditarEmpleadoFamilia(idempleadofamilia,idempleado){
//    		$("#dmEditarFamilia").dialog("open");
//    		$("#dmEditarFamilia").html(getHTMLLoaging30());
//    		$.ajax({
//    			cache: false,
//    			contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
//    	        type: 'POST',
//    	        url: "${ctx}/page/familia?action=empleado_vereditarfamilia&idempleado="+idempleado+"&idempleadofamilia="+idempleadofamilia,
//    	        dataType: "text",
//    	        error: function(jqXHR, textStatus, errorThrown) {
//    	            alert(jqXHR.statusText);
//    	        },
//    	        success: function(data) {	
//    	           	$("#dmEditarFamilia").html(data);     
//    	        }
//    	    });
//    }
 
function VereditarHorarioAsignado(idhorarioasignado,idcontrato){
	$("#dmEditarHorarioAsignado").dialog("open");
	$("#dmEditarHorarioAsignado").html(getHTMLLoaging30());
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/horarios?action=empleado_vereditarhorarioasignado&idhorarioasignado="+idhorarioasignado+"&idcontrato="+idcontrato,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {		                    	                    	
           	$("#dmEditarHorarioAsignado").html(data);     
        }
    });
}


function visualizarDesvinculacion(idcontrato){
	alert("desvinculacion");
	$("#dmDesvinculacion").dialog("open");  
	AbreDesvinculacion(idcontrato);
}

function AbreDesvinculacion(idcontrato) {		

	$("#dmDesvinculacion").html(getHTMLLoaging30());
	$.ajax({
		cache: false,
		contentType: 'application/x-www-form-urlencoded; charset=iso-8859-1;', 
        type: 'POST',
        url: "${ctx}/page/desvinculacion?action=ver_desvinculacion&idcontrato="+idcontrato,
        dataType: "text",
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.statusText);
        },
        success: function(data) {	                    	                    	
           	$("#dmDesvinculacion").html(data);     
        }
    });
}
}

</script>

<body>
<div id="dmDetalleEmpleado" title="Detalle Empleado"></div>
<div id="dmDetalleProcesoDisciplinario" title="Detalle Proceso Disciplinario"></div>
<div id="dmMensajeEmpleado" title="Mensaje"></div>
<div id="dmMensajeBanco" title="Mensaje Banco"></div>
<div id="dmMensajeDisciplinario" title="Mensaje Disciplinario"></div>
<div id="dmMensajeSalario" title="Mensaje Salario"></div>
<div id="dmMensajeDocumentoPersonal" title="Mensaje Documento"></div>
<div id="dmMensajeAfiliacion" title="Mensaje Afiliación"></div>
<div id="dmMensajeProcesoDisciplinario" title="Mensaje Proceso Disciplinario"></div>
<div id="dmMensajeEducacion" title="Mensaje Educación"></div>
<div id="dmMensajeFamilia" title="Mensaje Familia"></div>
<div id="dmMensajeContrato" title="Contrato"></div>
<div id="dmNuevoEmpleado" title="Nuevo Empleado"></div>
<div id="dmEditarEmpleado" title="Editar Empleado"></div>
<div id="dmEditarEmpleadoContrasena" title="Cambiar Contraseña"></div>
<div id="dmEditarEmpleadoAplicacion" title="Editar Grupo"></div>
<div id="dmEditarEmpleadoCuenta" title="Editar Cuenta"></div>
<div id="dmNuevoContrato" title="Nuevo Contrato"></div>
<div id="dmNuevoBanco" title="Nuevo Banco"></div>
<div id="dmNuevaAfiliacion" title="Nueva Afiliación"></div>
<div id="dmNuevoProcesoDisciplinario" title="Nuevo Proceso Disciplinario"></div>
<div id="dmNuevoFamiliar" title="Nuevo Familiar"></div>
<div id="dmNuevaEducacion" title="Nueva Educación"></div>
<div id="dmEditarHorario" title="Editar Horario"></div>
<div id="dmProcesoDisciplinario" title="Histórico Disciplinario"></div>
<div id="dmAdicionTestigo" title="Agregar Testigo"></div>
<div id="dmEditarSalario" title="Editar Salario"></div>
<div id="dmEditarContrato" title="Editar Contrato"></div>
<div id="dmNuevaPropiedad" title="Nueva Propiedad"></div>
<div id="dmEditarPropiedad" title="Editar Propiedad"></div>
<div id="dmEditarBanco" title="Editar Banco"></div>
<div id="dmEditarAfiliacion" title="Editar Afiliación"></div>
<div id="dmEditarDisciplina" title="Editar Proceso"></div>
<div id="dmEditarEducacion" title="Editar Educación"></div>
<div id="dmEditarFamilia" title="Editar Familiar"></div>
<!-- <div id="dmEditarEducacion" title="Editar Educación"></div> -->
<div id="dmEditarHorarioAsignado" title="Editar Horario Asignado"></div>
<div id="dmDesvinculacion" title="Desvinculación"></div>

<div id="dmEditarfoto" title="Foto"></div>
<div id="pruebarestive" align="center">
	<table cellspacing="2"  width="100%" border="0" cellpadding="2">
	<col />
	<col style="width: 5px;"/>
	<col style="width: 200px;"/>	
	<tr  valign="middle">
	<td class="td3">
	<form name="fBuscarUsuario" id="fBuscarUsuario" action="${ctx}/page/empleado">
	<input type="hidden" name="action" value="empleado_buscar">
      <table width="100%" border="0">          
        <tr class="td3" valign="middle">
          <td height="33" align="right" valign="middle" width="300">
           	Buscar por: 
           	<select name="tipobusqueda" id="tipobusquedausuario">
           		<option value="2">Nombre</option>
           		<option value="3">Num. identificación</option>
				<option value="1">Fecha de creación</option>
           	</select>  
           	&nbsp;&nbsp; &nbsp;&nbsp;          
         </td>
         <td valign="middle" align="left" width="360">
         		<div id="tipobusquedausuario_usuario" class="classtipobusquedausuario" style="display: none;">   
	            	<input type="text" name="usuario">
	            </div>
         		<div id="tipobusquedausuario_numidentificacion" class="classtipobusquedausuario" style="display: none;">   
	            	<input type="text" name="numidentificacion">
	            </div>	            
	            <div id="tipobusquedausuario_nombreempleado" class="classtipobusquedausuario" style="display: block;">   
	            	<input type="text" name="nombre" size="50">
	            </div>
	            <div id="tipobusquedausuario_codusuario" class="classtipobusquedausuario" style="display: none;">   
	            	<input type="text" name="codusuario">
	            </div>
	       
	           
	            <div id="tipobusquedausuario_creacion" class="classtipobusquedausuario" style="display: none;">   
	            	desde: <input type="text" name="from" 
					id="from_b_usuario" value="<fmt:formatDate value="${now}" pattern="dd/MM/yyyy" />" />
					&nbsp;&nbsp;hasta: <input type="text" name="to" id="to_b_usuario" 
					value="<fmt:formatDate value="${now}" pattern="dd/MM/yyyy" />" />
	            </div> 
            	
           </td>          
          <td valign="middle" align="left">                       
           <button type="submit" id="btnBuscarUsuario" name="btnBuscarUsuario">Buscar empleado</button>
          </td>
         </tr>
       </table>
       </form> 
       </td>
       <td></td>
		<td valign="middle" align="center" class="td3">
		 <c:if test="${sessionScope[consHermes.USUARIO_SESSION].usuarioaplicacion.idgrupo == 1 || sessionScope[consHermes.USUARIO_SESSION].usuarioaplicacion.idgrupo == 214 || sessionScope[consHermes.USUARIO_SESSION].usuarioaplicacion.idgrupo == 215}">
		 		<button type="submit" id="btnNuevoEmpleado" name="btnNuevoEmpleado">Nuevo empleado</button>
		 </c:if>		
		</td>
	</tr>
	</table>
	

<div  align="center" id="msnBuscarEmpleado" ></div>
</div> 
<div  align="center" id="cajaBuscarUsuario">
</div>

</body>
